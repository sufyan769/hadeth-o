<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نتائج التصنيف</title>
<style>
body { font-family: sans-serif; background:#f6f6f6; padding:20px; }
.container { max-width:900px; margin:auto; background:white; padding:25px; border-radius:12px; }
.hadith-item {
    background:white; padding:15px; border-radius:8px; margin-bottom:12px;
    border: 1px solid #ddd; cursor:pointer;
}
.hadith-item:hover { background:#eef7ff; }
.title { font-size:18px; font-weight:bold; margin-bottom:5px; }
.category-title{ font-size:22px; font-weight:bold; margin-bottom:20px; text-align:center; }
</style>
</head>
<body>

<div class="container">
    <div id="category-name" class="category-title">جاري التحميل...</div>
    <div id="results"></div>
</div>

<script>
// ✅ اقرأ الكلمة من URL
const params = new URLSearchParams(window.location.search);
const keyword = params.get("q");

// ✅ ضع عنوان الصفحة
document.getElementById("category-name").innerText = `نتائج التصنيف: ${keyword}`;

// ✅ API الذي يجلب أحاديث التصنيف
const apiUrl =
`https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_category/${encodeURIComponent(keyword)}`;

fetch(apiUrl)
  .then(res => res.json())
  .then(data => {
      let container = document.getElementById("results");

      if (!data.items || data.items.length === 0) {
          container.innerHTML = "<p>لا توجد نتائج.</p>";
          return;
      }

      data.items.forEach(h => {
          container.innerHTML += `
            <div class="hadith-item" onclick="openDetails(${h.id})">
                <div class="title">${h.text}</div>
            </div>
          `;
      });
  })
  .catch(err => {
      document.getElementById("results").innerHTML = "<p>حدث خطأ أثناء تحميل البيانات.</p>";
      console.error(err);
  });

// ✅ عند الضغط على الحديث → فتح صفحة التفاصيل
function openDetails(id){
    window.location.href = `details.html?id=${id}`;
}
</script>

</body>
</html>
