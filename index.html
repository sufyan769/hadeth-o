<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>باحث متقدم في كتب سفيان الدوري</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Cairo', 'sans-serif'],
              'serif': ['Amiri', 'serif'],
            },
            colors: {
               'brown': {
                    50: '#fdf8f6',
                    100: '#f2e8e5',
                    200: '#eaddd7',
                    300: '#e0cec7',
                    400: '#d2bab0',
                    500: '#bfa094',
                    600: '#a18072',
                    700: '#977669',
                    800: '#846358',
                    900: '#43302b',
               },
               'beige': '#F5F5DC',
            }
          },
        },
      }
    </script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client"
  }
}
</script>
</head>
<body class="bg-beige font-sans">
    <div id="root"></div>
    <script type="module">
// START of Embedded Application Code

import React, { useState, useMemo, useEffect } from 'react';
import ReactDOM from 'react-dom/client';

// --- 1. ثوابت الأنواع (types.ts) ---
const SearchType = {
  AND: "AND",
  PHRASE: "PHRASE",
  FUZZY_WILDCARD: "FUZZY_WILDCARD",
  MULTI_FIELD: "MULTI_FIELD",
  BOOL: "BOOL",
  RANGE: "RANGE",
};

const searchService = (API_ENDPOINT) => async (params, from, size) => {
    const { query, type, century } = params;
    
    let effectiveQuery = query;
    if (type === 'category') {
        const categoryUrl = `${API_ENDPOINT.replace('/search_combined', '/search_category')}/${encodeURIComponent(query)}`;
        const categoryResponse = await fetch(categoryUrl);
        if (!categoryResponse.ok) throw new Error(`فشل طلب التصنيف: ${categoryResponse.status}`);
        const data = await categoryResponse.json();
        return {
            total: { value: data.count || (data.items || []).length, relation: 'eq' },
            hits: (data.items || []).map((hit, index) => ({ ...hit, _id: hit.id || `${from}-${index}` })),
            suggest: null,
        };
    }

    // The search term is now a path parameter.
    const searchUrl = `${API_ENDPOINT}/${encodeURIComponent(effectiveQuery)}`;
    
    // Pagination and other parameters are query parameters.
    const queryParams = new URLSearchParams({
        offset: String(from),
        limit: String(size),
    });

    if (century && type === SearchType.RANGE) {
        queryParams.append('century', century);
    }
    
    const fullUrl = `${searchUrl}?${queryParams.toString()}`;

    try {
        const response = await fetch(fullUrl);
        if (!response.ok) {
            const errorBody = await response.text();
            console.error("API Error Response:", errorBody);
            throw new Error(`فشل الطلب مع الحالة: ${response.status}`);
        }
        const data = await response.json();

        // Assuming a common REST API response structure from ORDS.
        const hits = data.items || [];
        const total = data.count || data.total_results || 0;
        
        if (!Array.isArray(hits)) {
             throw new Error("API returned an invalid hits array.");
        }

        return {
            total: { value: total, relation: 'eq' },
            hits: hits.map((hit, index) => ({ ...hit, _id: hit.id || `${from}-${index}` })),
            suggest: null,
        };
    } catch (err) {
        console.error('Search error:', err);
        throw new Error(err.message.includes('فشل الطلب') ? err.message : 'حدث خطأ غير متوقع أثناء البحث. يرجى التحقق من الشبكة والمحاولة مرة أخرى.');
    }
};

const search = searchService('https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_combined');


// --- 2. الأيقونات (components/icons.tsx) ---
const SearchIcon = ({ className = "w-6 h-6" }) => (
  React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
    React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" })
  )
);

const ArrowRightIcon = ({ className = "w-6 h-6" }) => (
  React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
    React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M14 5l7 7m0 0l-7 7m7-7H3" })
  )
);

const ArrowLeftIcon = ({ className = "w-6 h-6" }) => (
  React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
    React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M10 19l-7-7m0 0l7-7m-7 7h18" })
  )
);

const ZoomInIcon = ({ className = "w-6 h-6" }) => (
    React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
        React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3h-6" })
    )
);

const ZoomOutIcon = ({ className = "w-6 h-6" }) => (
    React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
        React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7" })
    )
);

const CloseIcon = ({ className = "w-6 h-6" }) => (
    React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", className, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
        React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M6 18L18 6M6 6l12 12" })
    )
);

// --- 4. شريط البحث (components/SearchBar.tsx) ---
const SearchBar = ({ onSearch, isLoading, query, onQueryChange }) => {
  const handleSubmit = (e) => {
    e.preventDefault();
    if (query.trim()) {
      onSearch({ query, type: 'search' });
    }
  };
  return (
    React.createElement('div', { className: 'w-full max-w-3xl mx-auto p-4' },
      React.createElement('form', { onSubmit: handleSubmit },
        React.createElement('div', { className: "relative flex-grow" },
          React.createElement('input', {
            type: "text", value: query, onChange: (e) => onQueryChange(e.target.value),
            placeholder: "أدخل عبارتك للبحث...",
            className: "w-full p-3 pr-12 border-2 border-cyan-500/50 bg-gray-900/50 text-cyan-300 rounded-lg shadow-lg focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition placeholder-gray-500 caret-cyan-400",
            style: { textShadow: '0 0 5px rgba(0, 255, 255, 0.5)', boxShadow: '0 0 15px rgba(0, 255, 255, 0.2), inset 0 0 5px rgba(0, 255, 255, 0.1)' },
            'aria-label': "Search query"
          }),
          React.createElement('button', { type: "submit", className: "absolute left-3 top-1/2 -translate-y-1/2 text-cyan-400 hover:text-cyan-200 transition-all duration-300 hover:scale-110", disabled: isLoading, 'aria-label': "Submit search" },
            isLoading ? React.createElement('div', { className: "w-5 h-5 border-2 border-cyan-400 border-t-transparent rounded-full animate-spin" }) : React.createElement(SearchIcon, { className: "w-6 h-6" })
          )
        )
      )
    )
  );
};

// --- 5. التنقل (components/Pagination.tsx) ---
const Pagination = ({ currentPage, totalResults, pageSize, onPageChange, isLoading }) => {
  const totalPages = Math.ceil(totalResults / pageSize);
  if (totalPages <= 1) return null;

  const handlePageClick = (page) => {
    if (page < 1 || page > totalPages || page === currentPage || isLoading) return;
    onPageChange(page);
  };
  
  const getPageNumbers = () => {
    const pageNumbers = [];
    const maxPagesToShow = 5, half = Math.floor(maxPagesToShow / 2);
    if (totalPages <= maxPagesToShow + 2) {
      for (let i = 1; i <= totalPages; i++) pageNumbers.push(i);
    } else if (currentPage <= half + 2) {
      for (let i = 1; i <= maxPagesToShow; i++) pageNumbers.push(i);
      pageNumbers.push('...');
      pageNumbers.push(totalPages);
    } else if (currentPage >= totalPages - half - 1) {
      pageNumbers.push(1);
      pageNumbers.push('...');
      for (let i = totalPages - maxPagesToShow + 1; i <= totalPages; i++) pageNumbers.push(i);
    } else {
      pageNumbers.push(1);
      pageNumbers.push('...');
      for (let i = currentPage - half; i <= currentPage + half; i++) pageNumbers.push(i);
      pageNumbers.push('...');
      pageNumbers.push(totalPages);
    }
    return pageNumbers;
  };

  const pageNumbers = getPageNumbers();
  const buttonClass = "px-4 py-2 border border-cyan-500/30 rounded-md transition duration-300 ease-in-out text-cyan-300 bg-gray-900/50 hover:bg-cyan-900/50 hover:border-cyan-400 disabled:opacity-50 disabled:cursor-not-allowed";
  const activeClass = "bg-cyan-700/80 text-white border-cyan-500 shadow-lg shadow-cyan-500/20";
  return (
    React.createElement('nav', { className: "flex justify-center items-center gap-2 mt-8", 'aria-label': "Pagination" },
      React.createElement('button', {
        onClick: () => handlePageClick(currentPage - 1), disabled: currentPage === 1 || isLoading,
        className: `${buttonClass} flex items-center gap-2`, 'aria-label': "الصفحة السابقة"
      }, React.createElement(ArrowRightIcon, { className: "w-4 h-4" }), "السابق"),
      
      pageNumbers.map((page, index) =>
        typeof page === 'number' ? (
          React.createElement('button', {
            key: index, onClick: () => handlePageClick(page), disabled: isLoading,
            className: `${buttonClass} ${currentPage === page ? activeClass : ''}`,
            'aria-current': currentPage === page ? 'page' : undefined
          }, page)
        ) : ( React.createElement('span', { key: index, className: "px-4 py-2 text-cyan-500/70" }, page) )
      ),
      React.createElement('button', {
        onClick: () => handlePageClick(currentPage + 1), disabled: currentPage === totalPages || isLoading,
        className: `${buttonClass} flex items-center gap-2`, 'aria-label': "الصفحة التالية"
      }, "التالي", React.createElement(ArrowLeftIcon, { className: "w-4 h-4" }))
    )
  );
};

// --- 6. نتائج البحث (components/SearchResults.tsx) ---
const ResultItem = ({ hit, onResultClick }) => {
    
    const getTitle = () => {
        const pageOrNum = hit.page_number;
        const sourceText = (hit.source || 'مصدر غير معروف');
        return pageOrNum ? `${sourceText} - ${pageOrNum}` : sourceText;
    };
    
    const getSnippet = () => {
        const content = hit.text || '';
        return content.length > 300 ? content.substring(0, 300) + '...' : content;
    };

    const getDetails = (s) => {
        const parts = [];
        if (s.muhaddith) parts.push(`المحدث: ${s.muhaddith}`);
        if (s.hukm) parts.push(`الحكم: ${s.hukm}`);
        if (s.rawi) parts.push(`الراوي: ${s.rawi}`);
        return parts.join(' | ');
    }
    
    return (
        React.createElement('div', { 
          className: "p-4 border border-purple-500/30 rounded-lg bg-gray-900/50 hover:bg-purple-900/30 hover:border-purple-400 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-purple-500/20",
          onClick: () => onResultClick(hit)
        },
            React.createElement('h3', { className: "text-xl font-bold text-cyan-300 font-orbitron", style: {textShadow: '0 0 8px rgba(0, 255, 255, 0.6)'} }, getTitle()),
            React.createElement('div', { className: "text-gray-300 font-exo leading-relaxed mt-2", dangerouslySetInnerHTML: { __html: getSnippet() }}),
            React.createElement('div', { className: "text-sm text-purple-400 mt-3 font-mono" }, React.createElement('span', null, getDetails(hit)))
        )
    );
};
const SearchResults = ({ results, isLoading, error, onResultClick }) => {
    if (isLoading) return React.createElement('div', { className: "text-center p-10" },
        React.createElement('div', { className: "w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto" }),
        React.createElement('p', { className: "mt-4 text-lg text-cyan-300" }, "جاري البحث...")
    );
    if (error) return React.createElement('div', { className: "text-center p-10 text-red-400 bg-red-900/30 rounded-lg border border-red-500/50" },
        React.createElement('p', { className: "font-bold text-lg" }, "حدث خطأ"),
        React.createElement('p', null, error)
    );
    if (!results) return React.createElement('div', { className: "text-center p-10 text-gray-500" }, React.createElement('p', null, "أدخل كلمة أو عبارة لبدء البحث في المجرة الرقمية."));
    
    return (
        React.createElement('div', null,
            results.hits.length === 0 ? 
                React.createElement('div', { className: "text-center p-10 text-gray-400" }, React.createElement('p', null, "لا توجد نتائج في هذا القطاع من الكون. حاول بكلمات أخرى."))
            : (
                React.createElement('div', { className: "space-y-4" },
                    React.createElement('p', { className: "text-purple-300 mb-4" }, `تم العثور على ${results.total.value} ${results.total.relation === 'eq' ? 'نتيجة' : 'نتيجة تقريبًا'}.`),
                    results.hits.map((hit) => React.createElement(ResultItem, { key: hit._id, hit: hit, onResultClick: onResultClick }))
                )
            )
        )
    );
};

// --- 7. عرض الكتاب (components/BookView.tsx) ---
const DetailRow = ({ label, value }) => {
    if (!value) return null;
    return React.createElement('div', { className: "py-2 px-3 flex flex-wrap gap-x-4 bg-gray-800/50 even:bg-gray-900/50 border-b border-purple-500/20" },
        React.createElement('dt', { className: "w-full sm:w-32 font-bold text-cyan-400 flex-shrink-0" }, label),
        React.createElement('dd', { className: "text-gray-300 flex-1", dangerouslySetInnerHTML: { __html: value } })
    );
};

const BookView = ({ hits, currentIndex, onNavigate, onClose, onCategoryClick }) => {
    const currentHit = hits[currentIndex];
    const [fontSize, setFontSize] = useState(18);
    const source = currentHit;
    
    useEffect(() => {
        document.querySelector('.book-view-container')?.scrollTo(0, 0);
    }, [currentIndex]);

    const getTitle = (s) => {
        const pageOrNum = s.page_number;
        const sourceText = s.source || 'بدون عنوان';
        return pageOrNum ? `${sourceText} - ${pageOrNum}` : sourceText;
    };
    
    const renderCategories = (categoriesString) => {
        if (!categoriesString) return null;
        const categories = categoriesString.split(',').map(c => c.trim()).filter(Boolean);
        if (categories.length === 0) return null;

        return React.createElement('div', { className: "py-2 px-3 flex flex-wrap gap-x-4 bg-gray-800/50 even:bg-gray-900/50 border-b border-purple-500/20" },
            React.createElement('dt', { className: "w-full sm:w-32 font-bold text-cyan-400 flex-shrink-0" }, "التصنيفات"),
            React.createElement('dd', { className: "text-gray-300 flex-1 flex flex-wrap items-center gap-2" },
                categories.map((item, index) => React.createElement('button', { 
                    key: index, 
                    onClick: () => onCategoryClick(item),
                    className: "inline-block bg-purple-800/70 text-purple-200 rounded-full px-3 py-1 text-sm font-semibold hover:bg-purple-700 hover:shadow-lg hover:shadow-purple-500/30 transition focus:outline-none focus:ring-2 focus:ring-purple-400"
                }, item))
            )
        );
    };
    
    const navButtonClass = "p-2 rounded-full hover:bg-cyan-900/50 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 px-4";

    return (
        React.createElement('div', { className: "p-4 md:p-8 min-h-screen book-view-container font-exo" },
             React.createElement('div', { className: "max-w-4xl mx-auto bg-gray-900/70 backdrop-blur-md shadow-2xl shadow-cyan-500/10 rounded-lg border border-cyan-500/20" },
                React.createElement('header', { className: "p-4 border-b border-cyan-500/20 bg-gray-900/50 rounded-t-lg sticky top-0 z-10" },
                    React.createElement('div', { className: "flex justify-between items-center gap-4" },
                        React.createElement('div', { className: "flex-1 min-w-0" },
                            React.createElement('h1', { className: "text-2xl md:text-3xl font-bold text-cyan-300 font-orbitron truncate", title: getTitle(source), style: {textShadow: '0 0 10px rgba(0, 255, 255, 0.7)'} }, getTitle(source))
                        ),
                        React.createElement('button', { onClick: onClose, className: "p-2 rounded-full hover:bg-red-900/50 transition flex-shrink-0", 'aria-label': "إغلاق عرض الكتاب" },
                            React.createElement(CloseIcon, { className: "w-6 h-6 text-red-400" })
                        )
                    )
                ),
                React.createElement('main', { className: "p-6 md:p-8" },
                    React.createElement('div', { className: "leading-loose whitespace-pre-wrap text-right text-gray-200", style: { fontSize: `${fontSize}px` }},
                        React.createElement('h2', { className: "text-xl font-bold text-cyan-400 mb-3 font-orbitron" }, "نص الحديث"),
                        React.createElement('p', { className: "mb-6 bg-gray-800/60 p-4 rounded-md border-l-4 border-cyan-500", dangerouslySetInnerHTML: { __html: source.text } }),
                        React.createElement('h2', { className: "text-xl font-bold text-purple-400 mb-3 font-orbitron" }, "الشرح"),
                        React.createElement('p', { className: "mb-6 bg-gray-800/60 p-4 rounded-md border-l-4 border-purple-500", dangerouslySetInnerHTML: { __html: source.sharh || 'لا يتوفر شرح لهذا الحديث.' } }),
                        React.createElement('h2', { className: "text-xl font-bold text-cyan-400 mb-3 font-orbitron" }, "تفاصيل الحديث"),
                         React.createElement('dl', { className: "border border-purple-500/20 rounded-md overflow-hidden" },
                            React.createElement(DetailRow, { label: "المصدر", value: source.source }),
                            React.createElement(DetailRow, { label: "الصفحة/الرقم", value: source.page_number }),
                            React.createElement(DetailRow, { label: "الراوي", value: source.rawi }),
                            React.createElement(DetailRow, { label: "المحدث", value: source.muhaddith }),
                            React.createElement(DetailRow, { label: "الحكم", value: source.hukm }),
                            React.createElement(DetailRow, { label: "التخريج", value: source.takhrij }),
                            renderCategories(source.categories),
                            React.createElement(DetailRow, { label: "معرف", value: source.id })
                        )
                    )
                ),
                React.createElement('footer', { className: "p-4 border-t border-cyan-500/20 bg-gray-900/50 rounded-b-lg sticky bottom-0 z-10 flex justify-between items-center flex-wrap gap-4 text-cyan-300" },
                    React.createElement('div', { className: "flex gap-2 items-center" },
                         React.createElement('button', { onClick: () => onNavigate(currentIndex - 1), disabled: currentIndex === 0, className: navButtonClass, 'aria-label': "النتيجة السابقة" }, React.createElement(ArrowRightIcon, { className: "w-5 h-5" }), "السابق"),
                        React.createElement('span', { className: "text-cyan-400 tabular-nums" }, `${currentIndex + 1} / ${hits.length}`),
                        React.createElement('button', { onClick: () => onNavigate(currentIndex + 1), disabled: currentIndex >= hits.length - 1, className: navButtonClass, 'aria-label': "النتيجة التالية" }, "التالي", React.createElement(ArrowLeftIcon, { className: "w-5 h-5" }))
                    ),
                    React.createElement('div', { className: "flex gap-2 items-center" },
                        React.createElement('button', { onClick: () => setFontSize(s => Math.min(s + 1, 32)), className: "p-2 rounded-full hover:bg-cyan-900/50 transition", 'aria-label': "تكبير النص" }, React.createElement(ZoomInIcon, { className: "w-5 h-5" })),
                        React.createElement('span', { className: "text-cyan-400 tabular-nums w-12 text-center" }, `${fontSize}px`),
                        React.createElement('button', { onClick: () => setFontSize(s => Math.max(s - 1, 12)), className: "p-2 rounded-full hover:bg-cyan-900/50 transition", 'aria-label': "تصغير النص" }, React.createElement(ZoomOutIcon, { className: "w-5 h-5" }))
                    )
                )
            )
        )
    );
};

// --- 8. التطبيق الرئيسي (App.tsx) ---
const App = () => {
    const PAGE_SIZE = 20;
    const [searchResults, setSearchResults] = useState(null);
    const [isLoading, setIsLoading] = useState(false);
    const [error, setError] = useState(null);
    const [selectedHit, setSelectedHit] = useState(null);
    const [selectedHitIndex, setSelectedHitIndex] = useState(null);
    const [currentPage, setCurrentPage] = useState(1);
    const [currentQuery, setCurrentQuery] = useState('');
    const [currentSearchParams, setCurrentSearchParams] = useState(null);

    const fetchResults = async (params, page) => {
        setIsLoading(true);
        setError(null);
        const from = (page - 1) * PAGE_SIZE;
        try {
            const results = await search(params, from, PAGE_SIZE);
            setSearchResults(results);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } catch (err) {
            setError(err instanceof Error ? err.message : 'An unknown error occurred.');
            setSearchResults(null);
        } finally {
            setIsLoading(false);
        }
    };

    const handleSearch = (params) => {
        setCurrentQuery(params.query);
        setCurrentPage(1);
        setCurrentSearchParams(params);
        fetchResults(params, 1);
    };
    
    const handlePageChange = (page) => {
        if (currentSearchParams) {
            setCurrentPage(page);
            fetchResults(currentSearchParams, page);
        }
    };

    const handleResultClick = (hit) => {
        if (searchResults && searchResults.hits) {
            const index = searchResults.hits.findIndex(h => h._id === hit._id); 
            if (index !== -1) {
                setSelectedHit(searchResults.hits[index]);
                setSelectedHitIndex(index);
            }
        }
    };
    
    const handleBookViewNavigation = (newIndex) => {
        if (searchResults && searchResults.hits && newIndex >= 0 && newIndex < searchResults.hits.length) {
            setSelectedHit(searchResults.hits[newIndex]);
            setSelectedHitIndex(newIndex);
        }
    };

    const handleCloseBookView = () => {
        setSelectedHit(null);
        setSelectedHitIndex(null);
    };

    const handleCategoryClick = (category) => {
        handleCloseBookView();
        // Use a special type for category search
        handleSearch({ query: category, type: 'category' });
    };
    
    useEffect(() => {
        // Add a style tag for the space theme
        const style = document.createElement('style');
        style.textContent = `
            @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Exo+2:wght@300;400&display=swap');
            body {
                background-color: #0c0a18;
                background-image:
                    radial-gradient(at 20% 20%, hsla(212, 90%, 50%, 0.1) 0px, transparent 50%),
                    radial-gradient(at 80% 20%, hsla(288, 80%, 50%, 0.1) 0px, transparent 50%),
                    radial-gradient(at 20% 80%, hsla(330, 80%, 50%, 0.1) 0px, transparent 50%),
                    radial-gradient(at 80% 80%, hsla(180, 80%, 50%, 0.1) 0px, transparent 50%);
            }
            .font-orbitron { font-family: 'Orbitron', sans-serif; }
            .font-exo { font-family: 'Exo 2', sans-serif; }
        `;
        document.head.appendChild(style);
    }, []);

    if (selectedHit && selectedHitIndex !== null && searchResults && searchResults.hits) {
        return React.createElement(BookView, { 
            hits: searchResults.hits, 
            currentIndex: selectedHitIndex, 
            onNavigate: handleBookViewNavigation, 
            onClose: handleCloseBookView,
            onCategoryClick: handleCategoryClick
        });
    }

    return (
        React.createElement('div', { className: "min-h-screen text-gray-200 font-exo" },
            React.createElement('header', { className: "py-6 text-center" },
                React.createElement('h1', { className: "text-4xl md:text-5xl font-bold font-orbitron text-cyan-300", style: {textShadow: '0 0 15px rgba(0, 255, 255, 0.8)'} }, "المكتبة الحديثية الرقمية"),
                React.createElement('p', { className: "text-lg mt-2 text-purple-300" }, "استكشف كنوز السنة النبوية في فضاء المعرفة")
            ),
            React.createElement('main', { className: "container mx-auto p-4 md:p-8" },
                React.createElement('div', { className: "bg-gray-900/50 backdrop-blur-sm p-4 sm:p-6 rounded-lg shadow-lg border border-cyan-500/20" },
                    React.createElement(SearchBar, { onSearch: handleSearch, isLoading: isLoading, query: currentQuery, onQueryChange: setCurrentQuery })
                ),
                React.createElement('div', { className: "mt-8" },
                    React.createElement(SearchResults, { results: searchResults, isLoading: isLoading, error: error, onResultClick: handleResultClick }),
                    searchResults && searchResults.total.value > 0 && (
                        React.createElement(Pagination, {
                            currentPage: currentPage, totalResults: searchResults.total.value, pageSize: PAGE_SIZE,
                            onPageChange: handlePageChange, isLoading: isLoading
                        })
                    )
                )
            ),
            React.createElement('footer', { className: "text-center py-4 mt-8 text-sm text-purple-400/70" },
                React.createElement('p', null, "بوابة فضائية للمعرفة النبوية")
            )
        )
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(
  React.createElement(React.StrictMode, null, React.createElement(App, null))
);

// END of Embedded Application Code
</script>
</body>
</html>
