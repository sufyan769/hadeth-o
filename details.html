<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>تفاصيل الحديث</title>

<style>
body { font-family: sans-serif; background:#f6f6f6; margin:0; padding:0; }
.container {
  max-width: 900px; margin:auto; background:white;
  padding:25px; border-radius:12px; margin-top:25px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}
.label { font-weight:bold; margin-top:15px; color: #333; }
.value { margin-bottom:10px; white-space: pre-line; color: #555; line-height: 1.6;}

.category-badge {
    display:inline-block;
    background:#007bff;
    color:white;
    padding:6px 10px;
    margin:4px;
    border-radius:6px;
    font-size:14px;
    text-decoration:none;
    transition: background-color 0.2s;
}
.category-badge:hover { background:#0056b3; }

.back-btn {
  display:inline-block;
  background:#008CBA;
  color:white !important;
  padding:10px 16px;
  text-decoration:none;
  border-radius:8px;
  margin-top:20px;
  transition: background-color 0.2s;
}
.back-btn:hover { background: #00739c; }
</style>
</head>
<body>

<div class="container">
  <h1 id="hadith-title">الحديث</h1>

  <div class="label">الحديث:</div>
  <div class="value" id="text">جاري التحميل...</div>

  <div class="label">الشرح:</div>
  <div class="value" id="sharh">—</div>

  <div class="label">الراوي:</div>
  <div class="value" id="rawi">—</div>

  <div class="label">المحدث:</div>
  <div class="value" id="muhaddith">—</div>

  <div class="label">المصدر:</div>
  <div class="value" id="source">—</div>

  <div class="label">الحكم:</div>
  <div class="value" id="hukm">—</div>

  <div class="label">الصفحة او الرقم:</div>
  <div class="value" id="page_number">—</div>

  <div class="label">التخريج:</div>
  <div class="value" id="takhrij">—</div>

  <div class="label">التصنيف:</div>
  <div class="value" id="categories">—</div>

  <a href="index.html" class="back-btn">🔍 رجوع للبحث</a>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (!id) {
        document.getElementById("text").innerText = "لم يتم تحديد حديث لعرضه.";
        return;
    }

    const apiUrl = `https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_by_id/${id}`;

    fetch(apiUrl)
      .then(res => {
          if (!res.ok) {
              throw new Error(`HTTP error! status: ${res.status}`);
          }
          return res.json();
      })
      .then(data => {
          if (!data.items || data.items.length === 0) {
              document.getElementById("text").innerText = "الحديث غير موجود.";
              return;
          }

          const h = data.items[0];

          document.getElementById("text").innerText        = h.text ?? "—";
          document.getElementById("sharh").innerText       = h.sharh ?? "—";
          document.getElementById("rawi").innerText        = h.rawi ?? "—";
          document.getElementById("muhaddith").innerText   = h.muhaddith ?? "—";
          document.getElementById("source").innerText      = h.source ?? "—";
          document.getElementById("hukm").innerText        = h.hukm ?? "—";
          document.getElementById("page_number").innerText = h.page_number ?? "—";
          document.getElementById("takhrij").innerText     = h.takhrij ?? "—";

          if (h.categories) {
            const parts = h.categories.split(" - ");
            document.getElementById("categories").innerHTML =
              parts.map(cat =>
                `<a class="category-badge" href="category.html?q=${encodeURIComponent(cat)}">${cat}</a>`
              ).join("");
          } else {
            document.getElementById("categories").innerHTML = "—";
          }
      })
      .catch(err => {
          console.error(err);
          document.getElementById("text").innerText = "حدث خطأ أثناء تحميل البيانات.";
      });
});
</script>

</body>
</html>
