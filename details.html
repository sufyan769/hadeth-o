<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¯ÙŠØ«</title>
<style>
    body { font-family: sans-serif; background:#f6f6f6; padding:30px; }
    .container { max-width:850px; margin:auto; background:white; padding:30px; border-radius:12px; }
    h1 { text-align:center; margin-bottom:25px; }
    .label { font-weight:bold; margin-top:15px; }
    .value { margin-bottom:20px; }
    .category-badge {
        background:#0d6efd; color:white;
        padding:5px 10px; border-radius:6px;
        margin:3px; display:inline-block;
        text-decoration:none;
    }
    .btn-back {
        margin-top: 30px; display: inline-block;
        background:#0d6efd; color:white;
        padding:10px 18px; border-radius:10px;
        text-decoration:none; font-size:17px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¯ÙŠØ«</h1>

    <div class="label">Ø§Ù„Ø­Ø¯ÙŠØ«:</div>
    <div class="value" id="text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

    <div class="label">Ø§Ù„Ø´Ø±Ø­:</div>
    <div class="value" id="sharh">â€”</div>

    <div class="label">Ø§Ù„Ø±Ø§ÙˆÙŠ:</div>
    <div class="value" id="rawi">â€”</div>

    <div class="label">Ø§Ù„Ù…Ø­Ø¯Ø«:</div>
    <div class="value" id="muhaddith">â€”</div>

    <div class="label">Ø§Ù„Ù…ØµØ¯Ø±:</div>
    <div class="value" id="source">â€”</div>

    <div class="label">Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ Ø§Ù„Ø±Ù‚Ù…:</div>
    <div class="value" id="page_number">â€”</div>

    <div class="label">Ø§Ù„Ø­ÙƒÙ…:</div>
    <div class="value" id="hukm">â€”</div>

    <div class="label">Ø§Ù„ØªØ®Ø±ÙŠØ¬:</div>
    <div class="value" id="takhrij">â€”</div>

    <div class="label">Ø§Ù„ØªØµÙ†ÙŠÙ:</div>
    <div class="value" id="categories">â€”</div>

    <a href="index.html" class="btn-back">ğŸ” Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø­Ø«</a>
</div>


<script>
// âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ id Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

// âœ… API Ø±Ø§Ø¨Ø· Oracle
const apiUrl = `https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_by_id/${id}`;


// âœ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø¥Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ø³ØªÙ‚Ù„Ø©
function renderCategories(categoryText) {
    if (!categoryText || categoryText.trim() === "") return "â€”";

    const parts = categoryText
        .split(/[,|]/)
        .map(c => c.trim())
        .filter(c => c.length > 0);

    return parts
        .map(cat => `
            <a class="category-badge"
                href="https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_category/${encodeURIComponent(cat)}"
                target="_blank">
                ${cat}
            </a>
        `)
        .join("");
}


// âœ… Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ« Ù…Ù† Oracle
fetch(apiUrl)
  .then(res => res.json())
  .then(data => {
      if (!data.items || data.items.length === 0) {
          document.getElementById("text").innerText = "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¯ÙŠØ«.";
          return;
      }

      const h = data.items[0];

      document.getElementById("text").innerText = h.text || "â€”";
      document.getElementById("sharh").innerText = h.sharh || "â€”";
      document.getElementById("rawi").innerText = h.rawi || "â€”";
      document.getElementById("muhaddith").innerText = h.muhaddith || "â€”";
      document.getElementById("source").innerText = h.source || "â€”";
      document.getElementById("page_number").innerText = h.page_number || "â€”";
      document.getElementById("hukm").innerText = h.hukm || "â€”";
      document.getElementById("takhrij").innerText = h.takhrij || "â€”";

      // âœ… Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª (Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø°ÙƒÙŠØ©)
      document.getElementById("categories").innerHTML = renderCategories(h.categories);
  })
  .catch(err => {
      document.getElementById("text").innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
      console.error(err);
  });
</script>

</body>
</html>
