<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø¯ÙŠØ«</title>

<style>
body { font-family: sans-serif; background:#f6f6f6; margin:0; padding:0; }
.container {
  max-width: 900px; margin:auto; background:white;
  padding:25px; border-radius:12px; margin-top:25px;
}
.label { font-weight:bold; margin-top:15px; }
.value { margin-bottom:10px; white-space: pre-line; }

.category-badge {
    display:inline-block;
    background:#007bff;
    color:white;
    padding:6px 10px;
    margin:4px;
    border-radius:6px;
    font-size:14px;
    text-decoration:none;
}
.category-badge:hover { background:#0056b3; }

.back-btn {
  display:inline-block;
  background:#008CBA;
  color:white !important;
  padding:10px 16px;
  text-decoration:none;
  border-radius:8px;
  margin-top:20px;
}
</style>
</head>
<body>

<div class="container">
  <h1 id="hadith-title">Ø§Ù„Ø­Ø¯ÙŠØ«</h1>

  <div class="label">Ø§Ù„Ø­Ø¯ÙŠØ«:</div>
  <div class="value" id="text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

  <div class="label">Ø§Ù„Ø´Ø±Ø­:</div>
  <div class="value" id="sharh">â€”</div>

  <div class="label">Ø§Ù„Ø±Ø§ÙˆÙŠ:</div>
  <div class="value" id="rawi">â€”</div>

  <div class="label">Ø§Ù„Ù…Ø­Ø¯Ø«:</div>
  <div class="value" id="muhaddith">â€”</div>

  <div class="label">Ø§Ù„Ù…ØµØ¯Ø±:</div>
  <div class="value" id="source">â€”</div>

  <div class="label">Ø§Ù„Ø­ÙƒÙ…:</div>
  <div class="value" id="hukm">â€”</div>

  <div class="label">Ø§Ù„ØµÙØ­Ø© Ø§Ùˆ Ø§Ù„Ø±Ù‚Ù…:</div>
  <div class="value" id="page_number">â€”</div>

  <div class="label">Ø§Ù„ØªØ®Ø±ÙŠØ¬:</div>
  <div class="value" id="takhrij">â€”</div>

  <div class="label">Ø§Ù„ØªØµÙ†ÙŠÙ:</div>
  <div class="value" id="categories">â€”</div>

  <a href="index.html" class="back-btn">ğŸ” Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø­Ø«</a>
</div>

<script>
// âœ… Ù‚Ø±Ø§Ø¡Ø© ID Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

// âœ… Ø±Ø§Ø¨Ø· Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø¯ÙŠØ« Ù…Ù† Oracle APEX
const apiUrl =
  `https://g85b062bd5c6cb1-fatwaproject.adb.me-dubai-1.oraclecloudapps.com/ords/SUFEAN/hadeeth/search_by_id/${id}`;

fetch(apiUrl)
  .then(res => res.json())
  .then(data => {
      if (!data.items || data.items.length === 0) {
          document.getElementById("text").innerText = "Ø§Ù„Ø­Ø¯ÙŠØ« ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.";
          return;
      }

      const h = data.items[0];

      document.getElementById("text").innerText        = h.text ?? "â€”";
      document.getElementById("sharh").innerText       = h.sharh ?? "â€”";
      document.getElementById("rawi").innerText        = h.rawi ?? "â€”";
      document.getElementById("muhaddith").innerText   = h.muhaddith ?? "â€”";
      document.getElementById("source").innerText      = h.source ?? "â€”";
      document.getElementById("hukm").innerText        = h.hukm ?? "â€”";
      document.getElementById("page_number").innerText = h.page_number ?? "â€”";
      document.getElementById("takhrij").innerText     = h.takhrij ?? "â€”";

      // âœ… Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª â†’ Ø±ÙˆØ§Ø¨Ø· Ø°ÙƒÙŠØ©
      if (h.categories) {
        const parts = h.categories.split(" - ");
        document.getElementById("categories").innerHTML =
          parts.map(cat =>
            `<a class="category-badge" href="category.html?q=${encodeURIComponent(cat)}">${cat}</a>`
          ).join("");
      } else {
        document.getElementById("categories").innerHTML = "â€”";
      }
  })
  .catch(err => {
      console.error(err);
      document.getElementById("text").innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
  });
</script>

</body>
</html>
